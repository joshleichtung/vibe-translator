# Story 2.2: Create Vibe Input Form Component

## Status
Completed

## Story
**As a** user,
**I want** a text input field where I can describe a vibe or emotion,
**so that** I can trigger AI music generation.

## Acceptance Criteria
1. Input component uses shadcn/ui `Input` with pastel horror styling
2. Placeholder text shows example vibes ("rainy Sunday after a breakup")
3. Submit button styled with pastel horror colors
4. Form prevents empty submissions
5. Loading state shown during API request (button disabled)
6. Component renders on landing page with proper spacing

## Tasks / Subtasks
- [x] Create VibeInputForm component (AC: 1, 2, 3)
  - [x] Create `src/components/VibeInputForm.tsx`
  - [x] Import shadcn/ui `Input` and `Button` components
  - [x] Add placeholder text with example vibe
  - [x] Apply pastel horror styling classes
  - [x] Set up controlled input state with React useState
- [x] Implement form validation (AC: 4)
  - [x] Check for empty string before submission
  - [x] Show validation message if input empty
  - [x] Trim whitespace from input value
- [x] Add loading state management (AC: 5)
  - [x] Accept `isLoading` prop from parent
  - [x] Disable button during loading state
  - [x] Show loading spinner or text on button
  - [x] Disable input field during loading
- [ ] Integrate component on landing page (AC: 6)
  - [ ] Import VibeInputForm in main App component
  - [ ] Position with proper spacing/margins
  - [ ] Test responsive layout on mobile/desktop
  - [ ] Verify pastel horror aesthetic consistency

## Dev Notes

### Tech Stack Reference
- **UI Components**: shadcn/ui (Input, Button)
- **Framework**: React with TypeScript
- **Styling**: Pastel horror custom classes
- **State Management**: React useState hooks

### Component Structure
```typescript
// src/components/VibeInputForm.tsx
import { useState } from 'react';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

interface VibeInputFormProps {
  onSubmit: (vibe: string) => void;
  isLoading?: boolean;
}

export function VibeInputForm({ onSubmit, isLoading = false }: VibeInputFormProps) {
  const [vibe, setVibe] = useState('');
  const [error, setError] = useState('');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    const trimmedVibe = vibe.trim();

    if (!trimmedVibe) {
      setError('Please describe a vibe or emotion');
      return;
    }

    setError('');
    onSubmit(trimmedVibe);
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <Input
        type="text"
        value={vibe}
        onChange={(e) => setVibe(e.target.value)}
        placeholder="rainy Sunday after a breakup"
        disabled={isLoading}
        className="pastel-horror-input"
      />
      {error && <p className="text-pastel-warning text-sm">{error}</p>}
      <Button
        type="submit"
        disabled={isLoading}
        className="pastel-horror-button"
      >
        {isLoading ? 'Generating...' : 'Generate Music'}
      </Button>
    </form>
  );
}
```

### Pastel Horror Styling
Custom CSS classes to define (in globals.css or tailwind.config):
```css
.pastel-horror-input {
  @apply bg-pastel-bg border-pastel-border text-pastel-text;
  @apply focus:border-pastel-accent focus:ring-pastel-accent;
}

.pastel-horror-button {
  @apply bg-pastel-accent text-pastel-text-inverse;
  @apply hover:bg-pastel-accent-hover disabled:opacity-50;
}

.text-pastel-warning {
  @apply text-pastel-warning-text;
}
```

### Placeholder Examples
- "rainy Sunday after a breakup"
- "first coffee on a cold morning"
- "late night drive with no destination"
- "quiet celebration of small victories"

### Form Behavior
- Pressing Enter triggers submission (native form behavior)
- Empty submissions prevented with client-side validation
- Loading state disables all interactions
- Error clears when user starts typing again

### Accessibility
- Label for screen readers (if not visible)
- Proper focus management
- Button disabled state announced
- Error messages linked to input via aria-describedby

### Testing
Manual validation:
1. Empty submission → shows error message
2. Valid input → calls onSubmit with trimmed value
3. Loading state → button and input disabled
4. Responsive on mobile viewport

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-25 | 0.1 | Initial story creation from PRD Epic 2 | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References
None - component compiled successfully without errors

### Completion Notes List
1. Component created with full TypeScript type safety
2. Used existing horror-* color variables from index.css for pastel horror aesthetic:
   - Input: horror-mint background, horror-sage border, horror-coral focus
   - Button: horror-peach background, horror-coral hover, horror-rust border
   - Error text: horror-coral color
3. Implemented all accessibility features:
   - aria-invalid for input validation state
   - aria-describedby linking error message to input
   - role="alert" for error message
4. Added intelligent error clearing (clears when user starts typing)
5. Enhanced UX with responsive sizing (max-w-2xl, h-11 for comfortable touch targets)
6. Loading state disables both input and button with visual feedback
7. Component follows exact structure from story dev notes with improvements
8. Ready for Wave 2 integration into App.tsx

### File List
**Created:**
- /Users/josh/projects/aimusic/src/components/VibeInputForm.tsx

**Modified:**
- /Users/josh/projects/aimusic/docs/stories/2.2.vibe-input-form.md (status and task updates)

## QA Results
_To be populated by QA agent_
